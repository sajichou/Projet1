<!DOCTYPE html>
<html>
  <head>
    <title>La Kamaraderie - Soutien Scolaire et préparation aux concours</title>
    <%= csrf_meta_tags %>

    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application' %>

    <link href="https://fonts.googleapis.com/css?family=Lato|Roboto:300,300i,400,500i,700,700i" rel="stylesheet">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Le soutien scolaire en petit groupe de 3 chez le professeur, et préparation aux concours!" />

  </head>

  <body>
      <div id="main">

          <header>
             <%= render partial:"shared/navbar"%>      
          </header>
          

           <% flash.each do |key, value| %>
           <% if key == "notice"
              key = "success"
            elsif key == "alert"
              key = "warning"
            end %>
                
            <div class="alert alert-<%= key %>">
              <a href="#" data-dismiss="alert" class="close">×</a>
              <ul>
                <li>
                  <%= value %>
                </li>
              </ul>
            </div>
          <% end %>
        <section id="corps">
           <!-- <p> <%= debug session.to_hash %> </p> -->
          <%= yield %>       
        </section> 


          <footer>
            <%= render partial: "shared/footer" %>
          </footer>

    </div>
  </body>
  <script type="text/javascript"
            src="https://maps.googleapis.com/maps/api/js?libraries=places&amp;key=AIzaSyCmOpoeHGn3B-LSaL4_1LngRYrg9uR0IGE" data-turbolinks-eval="false"></script>
  <!-- Include Google Maps JS API -->

    <script type="text/javascript">
      function initializeAutocomplete(id) {
        var element = document.getElementById(id);
        if (element) {
          var autocomplete = new google.maps.places.Autocomplete(element, { types: ['geocode'] });
          autocomplete.setComponentRestrictions(
            {'country': ['fr']});
          google.maps.event.addListener(autocomplete, 'place_changed', onPlaceChanged);
        }
      }

      function onPlaceChanged() {
        var place = this.getPlace();
        var lat = document.getElementById("latitude");
        lat.value = place.geometry.location.lat();
        var long = document.getElementById("longitude");
        long.value = place.geometry.location.lng();
        // console.log(place);  // Uncomment this line to view the full object returned by Google API.
        for (var i in place.address_components) {
          var component = place.address_components[i];
          for (var j in component.types) {  // Some types are ["country", "political"]
            var type_element = document.getElementById(component.types[j]);
            if (type_element) {
              type_element.value = component.long_name;
            }
          }
        }
      }




      google.maps.event.addDomListener(window, 'load', function() {
        initializeAutocomplete('lieu');
      });
    </script>
</html>
